<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vidnag - Video Platform</title>

    <!-- Theme System - Load first -->
    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="/static/css/glass.css">
    <link rel="stylesheet" href="/static/css/main-layout.css">
    <link rel="stylesheet" href="/static/css/header.css">
    <link rel="stylesheet" href="/static/css/tabs.css">
    <link rel="stylesheet" href="/static/css/content.css">

    <!-- Theme Manager - Load early to prevent flash -->
    <script src="/static/js/theme.js"></script>
</head>
<body>
    <!-- Gradient Background -->
    <div class="gradient-bg"></div>

    <!-- Top Bar / Header -->
    <header class="main-header glass">
        <div class="header-left">
            <h1 class="brand-name">Vidnag</h1>
            <p class="welcome-text">Welcome back, <span id="username-display">User</span>!</p>
        </div>

        <div class="header-right">
            <button class="glass-btn-icon" id="profile-btn" title="Profile" aria-label="Profile">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </button>

            <button class="glass-btn-icon" id="settings-btn" title="Settings" aria-label="Settings">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6m0 6v6m5.2-13.8l-4.2 4.2m-2 2l-4.2 4.2M23 12h-6m-6 0H1m18.8-5.2l-4.2 4.2m-2 2l-4.2 4.2"></path>
                </svg>
            </button>

            <!-- Admin button - shown only if user is admin -->
            <button class="glass-btn-icon" id="admin-btn" title="Admin Portal" aria-label="Admin Portal" style="display: none;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                </svg>
            </button>

            <a href="https://github.com/anthropics/vidnag" target="_blank" class="glass-btn-icon" title="Help" aria-label="Help">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
            </a>

            <button class="glass-btn-icon" id="theme-toggle-btn" title="Toggle Theme" aria-label="Toggle Theme">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
            </button>

            <button class="glass-btn" id="logout-btn">Logout</button>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="tab-navigation glass">
        <button class="tab-btn active" data-tab="downloads">
            <span class="tab-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
            </span>
            <span class="tab-label">Video Downloads</span>
        </button>

        <button class="tab-btn" data-tab="tools">
            <span class="tab-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                </svg>
            </span>
            <span class="tab-label">Media Tools</span>
        </button>

        <button class="tab-btn" data-tab="browser">
            <span class="tab-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                </svg>
            </span>
            <span class="tab-label">File Browser</span>
        </button>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
        <!-- Tab 1: Video Downloads -->
        <section id="tab-downloads" class="tab-content active">
            <div class="split-layout">
                <!-- Left Panel (30%) -->
                <aside class="left-panel">
                    <!-- URL Input -->
                    <div class="glass-card">
                        <h3 class="glass-card-title">Add Downloads</h3>
                        <div class="form-group">
                            <label for="url-input">Enter video URLs (one per line)</label>
                            <textarea
                                id="url-input"
                                class="glass-textarea"
                                rows="6"
                                placeholder="https://youtube.com/watch?v=...&#10;https://vimeo.com/..."
                            ></textarea>
                        </div>
                        <button class="glass-btn-primary" id="download-btn">Download</button>
                    </div>

                    <!-- Active Downloads -->
                    <div class="glass-card">
                        <h3 class="glass-card-title">Active Downloads</h3>
                        <div id="active-downloads" class="active-downloads-list">
                            <p class="empty-state">No active downloads</p>
                        </div>
                    </div>

                    <!-- Queue -->
                    <div class="glass-card">
                        <h3 class="glass-card-title">Queue <span id="queue-count" class="glass-badge">0</span></h3>
                        <div id="queue-list" class="queue-list">
                            <p class="empty-state">Queue is empty</p>
                        </div>
                    </div>
                </aside>

                <!-- Right Panel (70%) -->
                <section class="right-panel">
                    <div class="glass-card">
                        <div class="glass-card-header">
                            <h3 class="glass-card-title">Download History</h3>
                            <div class="filter-controls">
                                <input
                                    type="search"
                                    id="history-search"
                                    class="glass-input"
                                    placeholder="Search downloads..."
                                >
                                <select id="history-filter" class="glass-select">
                                    <option value="all">All</option>
                                    <option value="completed">Completed</option>
                                    <option value="failed">Failed</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                        </div>
                        <div id="download-history" class="download-history glass-scrollbar">
                            <p class="empty-state">No downloads yet</p>
                        </div>
                    </div>
                </section>
            </div>
        </section>

        <!-- Tab 2: Media Tools -->
        <section id="tab-tools" class="tab-content">
            <div class="split-layout">
                <!-- Left Panel (30%) -->
                <aside class="left-panel">
                    <!-- Tool Selection -->
                    <div class="glass-card">
                        <h3 class="glass-card-title">Select Tool</h3>
                        <select id="tool-selector" class="glass-select">
                            <option value="video-converter">Video Converter</option>
                            <option value="audio-converter">Audio Converter</option>
                            <option value="video-trimmer">Video Trimmer</option>
                            <option value="audio-extractor">Audio Extractor</option>
                            <option value="compressor">Compressor</option>
                            <option value="resolution-changer">Resolution Changer</option>
                        </select>
                    </div>

                    <!-- Dynamic Tool Options -->
                    <div class="glass-card">
                        <h3 class="glass-card-title">Tool Options</h3>
                        <div id="tool-options" class="tool-options">
                            <!-- Content will be dynamically loaded based on selected tool -->
                            <p class="empty-state">Select a tool to configure options</p>
                        </div>
                    </div>
                </aside>

                <!-- Right Panel (70%) -->
                <section class="right-panel">
                    <!-- Completed Conversions -->
                    <div class="glass-card">
                        <h3 class="glass-card-title">Completed Conversions</h3>
                        <div id="completed-conversions" class="completed-list glass-scrollbar">
                            <p class="empty-state">No completed conversions</p>
                        </div>
                    </div>

                    <!-- Active & Queued -->
                    <div class="glass-card">
                        <h3 class="glass-card-title">Active & Queued</h3>
                        <div id="active-conversions" class="active-conversions">
                            <p class="empty-state">No active conversions</p>
                        </div>
                        <hr class="glass-divider">
                        <div id="queued-conversions" class="queued-conversions">
                            <h4>Queue <span id="conversion-queue-count" class="glass-badge">0</span></h4>
                            <p class="empty-state">Queue is empty</p>
                        </div>
                    </div>
                </section>
            </div>
        </section>

        <!-- Tab 3: File Browser -->
        <section id="tab-browser" class="tab-content">
            <div class="full-layout">
                <!-- Upload Section -->
                <div class="glass-card upload-section">
                    <div class="upload-zone" id="upload-zone">
                        <div class="upload-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                        </div>
                        <p class="upload-text">Drag & Drop files here or</p>
                        <button class="glass-btn-primary" id="choose-files-btn">Choose Files</button>
                        <input type="file" id="file-input" multiple accept="video/*,audio/*" style="display: none;">
                        <p class="upload-hint">Accepted formats: MP4, WebM, AVI, MKV, MOV, MP3, WAV, FLAC, AAC, OGG</p>
                    </div>
                    <div id="upload-progress" class="upload-progress" style="display: none;">
                        <!-- Upload progress indicators will appear here -->
                    </div>
                </div>

                <!-- File Browser -->
                <div class="glass-card">
                    <div class="glass-card-header">
                        <h3 class="glass-card-title">Your Files</h3>
                        <div class="file-controls">
                            <select id="sort-by" class="glass-select">
                                <option value="name">Sort by: Name</option>
                                <option value="size">Sort by: Size</option>
                                <option value="date">Sort by: Date</option>
                                <option value="type">Sort by: Type</option>
                            </select>
                            <select id="filter-by" class="glass-select">
                                <option value="all">Filter: All</option>
                                <option value="video">Video only</option>
                                <option value="audio">Audio only</option>
                            </select>
                            <input
                                type="search"
                                id="file-search"
                                class="glass-input"
                                placeholder="Search files..."
                            >
                        </div>
                    </div>

                    <div class="file-browser glass-scrollbar">
                        <table class="file-table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" id="select-all"></th>
                                    <th>Name</th>
                                    <th>Size</th>
                                    <th>Type</th>
                                    <th>Modified</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="file-list">
                                <tr>
                                    <td colspan="6" class="empty-state">No files yet</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="/static/js/api.js"></script>
    <script src="/static/js/main-app.js"></script>
</body>
</html>
